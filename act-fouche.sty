\NeedsTeXFormat{LaTeX2e}[2018/12/01]
\ProvidesPackage{fouche}
  [Fouche's personal]

\RequirePackage{xparse}

\ExplSyntaxOn
\NewDocumentCommand{\makeabbrev}{mmm}
 {
  \yoruk_makeabbrev:nnn { #1 } { #2 } { #3 }
 }

\cs_new_protected:Npn \yoruk_makeabbrev:nnn #1 #2 #3
 {
  \clist_map_inline:nn { #3 }
   {
    \cs_new_protected:cpn { #2 } { #1 { ##1 } }
   }
 }
\ExplSyntaxOff

\makeabbrev{\textbf}{bf#1}{
  a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,%
  A,B,C,D,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\boldsymbol}{bs#1}{%
    a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,%
    A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\mathsf}{sf#1}{
  a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,%
  A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\mathfrak}{fk#1}{
  a,b,c,d,e,f,g,h,j,k,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,%
  A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\mathcal}{cl#1}{
  A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\mathbb}{bb#1}{
  A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }
\makeabbrev{\underline}{u#1}{
  a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,
  A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z }

\RequirePackage{amsthm}
\RequirePackage[utf8x]{inputenc}
\RequirePackage[T2A]{fontenc}
\RequirePackage[svgnames]{xcolor}
\RequirePackage[pdftex]{graphicx}
\RequirePackage{ amsfonts
               , amsmath
               , amssymb
               , booktabs
               , caption
               , epigraph
               , enumitem
               , lipsum
               , mathtools
               , hyphenat
               , tensor
               , todonotes
               , stackrel
               , savesym
               , setspace
               , stmaryrd
               , tikz-cd
               , tcolorbox
               , verbatim
               , calligra
               }

\RequirePackage{tikz}
	\usetikzlibrary{calc}
	\usetikzlibrary{matrix,arrows}

\RequirePackage[all,2cell]{xy}\UseAllTwocells

% \RequirePackage[
%    sort
%  , numbers
% ]{natbib}

% \RequirePackage[%
%     hyperfootnotes=true
%   , bookmarksnumbered=true
%   , bookmarksopen=true
%   , breaklinks=true
%   , urlcolor=red!40!black
%   , colorlinks%
%   , citecolor=blue!40!black%
%   , linkcolor=blue!40!black%
%   ]{hyperref}

\RequirePackage[%
	  left=3.5cm
	, right=3.5cm
	, top=4cm
  , bottom=6cm%
]{geometry}

\tikzset{commutative diagrams/.cd,arrow style=tikz,diagrams={>=stealth'}}
\def\To{\Rightarrow}

%per le formule nei titoli
%-------------------------------------------------------------------------
\makeatletter
\g@addto@macro\bfseries{\boldmath}
\makeatother
%-------------------------------------------------------------------------

\renewcommand{\textbf}[1]{\text{\fontseries{b}\selectfont{\upshape #1}}}

\def\cate#1{\textsf{#1}}
 \def\CAT{\cate{CAT}}
 \def\Cat{\cate{Cat}}
 \def\Prof{\cate{Prof}}
 \def\Qat{\cate{Cat}}
 \def\caat{\cate{cat}}
 \def\Set{\cate{Set}}
 \def\Ab{\cate{Ab}}
 \def\Grp{\cate{Grp}}
 \def\Top{\cate{Top}}
 \def\Vec{\cate{Vect}}
 \def\sSet{\cate{sSet}}
 \def\Ch{\cate{Ch}}
 \def\Mfd{\cate{Mfd}}
 \def\Mod{\cate{Mod}}
 \def\Alg{\cate{Alg}}

\makeatletter
\def\defthm#1#2{%
  \newtheorem{#1}{#2}[section]%
  \expandafter\def\csname #1autorefname\endcsname{#2}%
  \expandafter\let\csname c@#1\endcsname\c@theorem}
\makeatother

\DeclareOption{english}{
\theoremstyle{definition}
\numberwithin{equation}{section}
\newtheorem{theorem}{Theorem}[section]
 \defthm{corollary}{Corollary}
 \defthm{proposition}{Proposition}
 \defthm{lemma}{Lemma}
 \defthm{claim}{Claim}
 \defthm{definition}{Definition}
 \defthm{notation}{Notation}
 \defthm{remark}{Remark}
 \defthm{conjecture}{Conjecture}
 \defthm{axiom}{Axiom}
 \defthm{example}{Example}
 \defthm{examples}{Examples}
 \defthm{exercise}{Exercise}
 \defthm{counterexample}{Counterexample}
 \defthm{construction}{Construction}
 \defthm{warning}{Warning}
 \defthm{digression}{Digression}
 \defthm{perspective}{Perspective}
 \defthm{discussion}{Discussion}
 \defthm{terminology}{Terminology}
 \defthm{heuristics}{Heuristics}
 \defthm{conclusion}{Conclusion}
}

\makeatletter
\def\renewtheorem#1{%
  \expandafter\let\csname#1\endcsname\relax
  \expandafter\let\csname c@#1\endcsname\relax
  \gdef\renewtheorem@envname{#1}
  \renewtheorem@secpar
}
\def\renewtheorem@secpar{\@ifnextchar[{\renewtheorem@numberedlike}{\renewtheorem@nonumberedlike}}
\def\renewtheorem@numberedlike[#1]#2{\newtheorem{\renewtheorem@envname}[#1]{#2}}
\def\renewtheorem@nonumberedlike#1{
\def\renewtheorem@caption{#1}
\edef\renewtheorem@nowithin{\noexpand\newtheorem{\renewtheorem@envname}{\renewtheorem@caption}}
\renewtheorem@thirdpar
}
\def\renewtheorem@thirdpar{\@ifnextchar[{\renewtheorem@within}{\renewtheorem@nowithin}}
\def\renewtheorem@within[#1]{\renewtheorem@nowithin[#1]}
\makeatother

\makeatletter
\def\redefthm#1#2{%
  \renewtheorem{#1}{#2}[section]%
  \expandafter\def\csname #1autorefname\endcsname{#2}%
  \expandafter\let\csname c@#1\endcsname\c@theorem}
\makeatother

\DeclareOption{italian}{
\theoremstyle{definition}
\numberwithin{equation}{section}
\renewtheorem{theorem}{Teorema}[section]
 \redefthm{corollary}{Corollario}
 \redefthm{proposition}{Proposizione}
 \redefthm{lemma}{Lemma}
 \redefthm{definition}{Definizione}
 \redefthm{notation}{Notazione}
 \redefthm{remark}{Osservazione}
 \redefthm{conjecture}{Congettura}
 \redefthm{axiom}{Assioma}
 \redefthm{example}{Esempio}
 \redefthm{examples}{Esempi}
 \redefthm{exercise}{Esercizio}
 \redefthm{exercises}{Esercizi}
 \redefthm{counterexample}{Controesempio}
 \redefthm{construction}{Costruzione}
 \redefthm{warning}{Caveat}
 \redefthm{digression}{Digressione}
 \redefthm{perspective}{Prospettiva}
 \redefthm{discussion}{Discussione}
 \redefthm{terminology}{Terminologia}
 \redefthm{heuristics}{Euristica}
}

\ExecuteOptions{english}
\ProcessOptions\relax

\newcommand{\arXivPreprint}[1]{\href{http://arxiv.org/abs/#1}{arXiv:#1} preprint}

\newlength{\seplen}
\setlength{\seplen}{5pt}
\newlength{\sepwid}
\setlength{\sepwid}{.4pt}
\def\firstblank{\,\rule{\seplen}{\sepwid}\,}
\def\sndblank{\firstblank\llap{\raisebox{2pt}{\firstblank}}}

\DeclareDocumentEnvironment{enumtag}{m}{%
	\begin{enumerate}%
		[ label = \textsc{#1}\oldstylenums{\arabic*}),%
		  ref   = \textsc{#1}\oldstylenums{\arabic*}%
	  ] }{ \end{enumerate} }

\def\op{\text{op}}
\def\co{\text{co}}
\def\coop{\text{coop}}

\newcommand{\celtag}[2][dr]{\ar[#1,white, "#2"{black,description}]}

\def\ran{\mathrm{ran}}
\def\Ran{\mathrm{Ran}}
\def\RAN{\textsc{Ran}}
\def\lan{\mathrm{lan}}
\def\Lan{\mathrm{Lan}}
\def\Yan{\mathrm{Yan}}
\def\LAN{\textsc{Lan}}
\def\rift{\mathrm{rift}}
\def\Rift{\mathrm{Rift}}
\def\RIFT{\textsc{Rift}}
\def\leeft{\mathrm{lift}}
\def\Lift{\mathrm{Lift}}
\def\LIFT{\textsc{Lift}}
\def\Nat{\textsf{Nat}}

\let\xto\xrightarrow
\let\xot\xleftarrow
\newcommand{\rot}[3][c]{\rotatebox[origin=#1]{#2}{$#3$}}
\newcommand{\rotarrow}[2][c]{\rotatebox[origin=#1]{#2}{$\Rightarrow$}}
\newcommand{\Nearrow}{\rotarrow{45}}
\newcommand{\Nwarrow}{\rotarrow{135}}
\newcommand{\Searrow}{\rotarrow{-45}}
\newcommand{\Swarrow}{\rotarrow{225}}
\newcommand{\Sarrow}{\rotarrow{-90}}
\newcommand{\Narrow}{\rotarrow{90}}

\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\coker}{coker}
\newcommand{\bsmat}{\begin{smallmatrix}}
\newcommand{\esmat}{\end{smallmatrix}}

\makeatletter
  \def\@cite#1#2{[\textsf{#1}\if@tempswa , #2\fi]}
  \def\@biblabel#1{[\textsf{#1}]}
\makeatother

\tcbuselibrary{most}
\tcolorboxenvironment{quote}{ blanker
                            , before skip=10pt
                            , after skip=10pt
                            , borderline west={6mm}{5pt}{gray!15}
                            , breakable
                            }

\newcommand{\pto}{\mathrel{\ooalign{\hfil\kern-2pt$\mapstochar$\hfil\cr\hfil$\to$\hfil}}}

\usepackage{turnstile}
\newcommand{\adjunct}[2]{\nsststile{#2}{#1}}

\setcounter{tocdepth}{1}

\newcommand{\putbib}[2]{
  \bibliography{#1}{}
  \bibliographystyle{#2}
}

\usetikzlibrary{decorations.markings}
\tikzstyle{pro} =
  [ decoration={ markings
               , mark = at position 0.5 with
                   {\draw[-] (0,-1.25pt) -- (0,1.25pt);}
               }
  , postaction ={decorate}
  ]

\DeclareMathAlphabet{\mybb}{U}{BOONDOX-ds}{m}{n}

\newcommand*{\Scale}[2][4]{\scalebox{#1}{\ensuremath{#2}}}%
\def\lrc{
\begin{tikzpicture}[scale=.33]
	\draw[-] (0,0) -| (1,1);
\end{tikzpicture}
}

\newcommand{\pb}{\arrow[dr, phantom, "\lrc", very near start]}
\newcommand{\xpb}{\ar@{}[dr]|(.33){\lrc}}
\newcommand{\xpo}{\ar@{}[dr]|(.66){\lrc}}

\def\[{\begin{equation}}
\def\]{\end{equation}}

\newenvironment{xsmallmatrix}[1]
{\renewcommand\thickspace{\kern#1}\smallmatrix}
{\endsmallmatrix}
\NewDocumentCommand{\var}{o m m}{
	\IfNoValueTF{#1}{
		\left[
			\begin{smallmatrix}
				#2 \\
				\downarrow \\
				#3
			\end{smallmatrix}\right]}
	{
		\left[
			\begin{xsmallmatrix}{0em}
				& #2 \\
				#1 & \downarrow \\
				& #3
			\end{xsmallmatrix}\right]}}

\usepackage{adjustbox}
\newenvironment{adju}[1][0.925]{%
\begin{center}\begin{adjustbox}{max height=0.5\textheight, max width=#1\textwidth}}{\end{adjustbox}\end{center}}

\newcommand{\cop}[2]{
  \left[\begin{smallmatrix}
    #1 \\ #2
  \end{smallmatrix}\right]
}
\def\emdash{\text{-}}

\DeclareRobustCommand{\coprod}{\mathop{\text{\fakecoprod}}}
\newcommand{\fakecoprod}{%
  \sbox0{$\prod$}%
  \smash{\raisebox{\dimexpr.9625\depth-\dp0}{\scalebox{1}[-1]{$\prod$}}}%
  \vphantom{$\prod$}%
}